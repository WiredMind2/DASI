<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>PREDICT'IF - D√©couvrez votre avenir</title>
        <link rel="stylesheet" href="index-styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    </head>
    <body>
        <header>
            <div class="logo">
                <div class="logo-circle"></div>
                <h1>PREDICT'IF</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html" class="active">Accueil</a></li>
                </ul>
                <div class="auth-buttons" id="auth-buttons">
                    <a href="login.html" class="btn btn-outline">Se Connecter</a>
                    <a href="inscription.html" class="btn btn-primary">S'inscrire</a>
                </div>
                <div class="user-menu" id="user-menu" style="display: none;">
                    <span class="greeting" id="user-greeting">Bonjour, Alice</span>
                    <div class="avatar" id="user-avatar">A</div>

                    <a class="logout" href="/frontend/ActionServlet/disconnect">D√©connexion</a>
                </div>
                <script>
                    document.addEventListener("DOMContentLoaded", async function () {
                        let username = null;
                        const url = "/frontend/ActionServlet/checkConnected";
                        try {
                            const response = await fetch(url);
                            if (!response.ok) {
                                throw new Error(`Response status: ${response.status}`);
                            }

                            username = await response.text();
                        } catch (error) {
                            console.error(error.message);
                        }

                        const authButtons = document.getElementById("auth-buttons");
                        const userMenu = document.getElementById("user-menu");
                        if (username != null) {
                            console.log(username);
                            userMenu.style.display = "flex";
                            authButtons.style.display = "none";
                            document.getElementById("user-greeting").innerHTML = "Bonjour, " + username;
                            document.getElementById("user-avatar").innerHTML = username[0];
                        } else {
                            authButtons.style.display = "flex";
                            userMenu.style.display = "none";
                        }
                    });
                </script>
            </nav>
        </header>

        <main>
            <section class="hero">
                <div class="hero-content">
                    <h2>D√©couvrez votre avenir</h2>
                    <p>
                        PREDICT'IF vous offre les meilleurs services de voyance par t√©l√©phone.
                        Nos m√©diums exp√©riment√©s vous guideront √† travers les myst√®res de
                        votre pass√©, pr√©sent et futur.
                    </p>
                    <a href="#mediums" class="btn btn-primary">D√©couvrir nos m√©diums</a>
                </div>
                <div class="hero-image">
                    <img src="zodiac.svg" alt="Zodiac Sign" class="zodiac-image">
                </div>
            </section>

            <section class="mediums" id="mediums">
                <h2>Nos M√©diums</h2>
                <p class="section-description">
                    Nous s√©lectionnons les trois cat√©gories afin de vous trouver les m√©diums les plus
                    exp√©riment√©s dans leur domaine
                </p>

                <div class="medium-cards">
                    <a href="#spirits" class="medium-card">
                        <div class="medium-icon">
                            <span class="crystal-ball">üîÆ</span>
                        </div>
                        <h3>Nos Spirites</h3>
                        <p>
                            Communiquez avec vos proches disparus et
                            recevez des messages de l'au-del√† gr√¢ce √† nos
                            m√©diums spirites exp√©riment√©s.
                        </p>
                    </a>


                    <a href="#cartomancers" class="medium-card">
                        <div class="medium-icon">
                            <span class="tarot-card">üÉè</span>
                        </div>
                        <h3>Nos Cartomanciens</h3>
                        <p>
                            D√©couvrez ce que l'avenir vous r√©serve gr√¢ce √†
                            la lecture des cartes par nos cartomanciens aux
                            dons exceptionnels.
                        </p>
                    </a>


                    <a href="#astrologers" class="medium-card">
                        <div class="medium-icon">
                            <span class="star">‚≠ê</span>
                        </div>
                        <h3>Nos Astrologues</h3>
                        <p>
                            Comprenez l'influence des astres sur votre vie et
                            votre destin gr√¢ce √† nos astrologues passionn√©s
                            et qualifi√©s.
                        </p>
                    </a>
                </div>
            </section>
        </main>

        <section class="professionals" id="professionals-section"></section>
        <!-- Content will be dynamically generated by JavaScript -->
    </section>

    <script>
        async function fetchData() {
            const url = "/frontend/ActionServlet/getMediums";
            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Response status: ${response.status}`);
                }

                const json = await response.json();
                console.log(json);
                return json;
            } catch (error) {
                console.error(error.message);
            }
            return [
                {
                    category: "Nos Spirites",
                    id: "spirits",
                    professionals: [
                        {name: "Mme Claire", description: "M√©dium spirite capable de communiquer avec les d√©funts", link: "medium.html"},
                        {name: "Marc Visions", description: "Spirite poss√©dant une plus de 20 ans de pratique", link: "medium.html"},
                        {name: "Sylvie Lumi√®re", description: "M√©dium aux dons exceptionnels pour contacter les √™tres chers", link: "medium.html"},
                        {name: "Pascal √âth√©r√©", description: "Sp√©cialiste de la communication avec le monde spirituel", link: "medium.html"}
                    ]
                },
                {
                    category: "Nos Cartomanciens",
                    id: "cartomancers",
                    professionals: [
                        {name: "Madame Irma", description: "Sp√©cialiste du tarot et l'oracle avec 15 ans d'exp√©rience", link: "medium.html"},
                        {name: "Serge Kelian", description: "Expert en cartomancie et en M√©dium par les cartes", link: "medium.html"},
                        {name: "Mlle Rose", description: "Sp√©cialiste des cartes oracle et du tarot des anges", link: "medium.html"},
                        {name: "L√©on Dubois", description: "M√©dium cartomancier renomm√© pour ses pr√©dictions pr√©cises", link: "medium.html"}
                    ]
                },
                {
                    category: "Nos Astrologues",
                    id: "astrologers",
                    professionals: [
                        {name: "Pierre C√©leste", description: "Astrologue professionnel sp√©cialis√© dans les th√®mes v√©dique", link: "medium.html"},
                        {name: "√âtoile Brillante", description: "Experte en astrologie sid√©rale et en √©tude des √©toiles distantes", link: "medium.html"},
                        {name: "Luc Solaire", description: "Sp√©cialiste des transits plan√©taires et de leurs effets", link: "medium.html"},
                        {name: "Luna Nocturne", description: "Astrologue intuitive sp√©cialis√©e dans les √©nergies cosmiques", link: "medium.html"}
                    ]
                }
            ];
        }
        document.addEventListener("DOMContentLoaded", async function () {
            const professionalsData = await fetchData();
            const professionalsSection = document.getElementById("professionals-section");
            professionalsData.forEach(category => {
                const categoryHTML = `
                    <div class="professionals-category" id="${category.id}">
                        <h2>${category.category}</h2>
                        <div class="professionals-grid">
                            ${category.professionals.map(professional => `
                                <div class="professional-card">
                                    <div class="professional-image"></div>
                                    <h3>${professional.name}</h3>
                                    <p>${professional.description}</p>
                                    <a href="${professional.link}" class="btn btn-small">En savoir plus</a>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                professionalsSection.innerHTML += categoryHTML;
            });
        });

    </script>
</main>

<footer>
    <p>&copy; 2025 PREDICT'IF - Tous droits r√©serv√©s</p>
</footer>
</body>
</html>